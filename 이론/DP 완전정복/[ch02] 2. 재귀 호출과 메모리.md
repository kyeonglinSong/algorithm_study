200303(화)

#[ch02] 2. 재귀 호출과 메모리



### 1. 프로세스 주소 공간

![IMG_280CF2CF2B1F-1](/Users/blossommilktea/Downloads/IMG_280CF2CF2B1F-1.jpeg)



#### 코드 영역

- 컴파일된 기계어 코드가 저장된다.
- 읽기 전용. 프로그램이 실행되는 동안 변경 불가능하다.
- 코드 영역의 크기는 **프로그램이 메모리에 올라갈 때** 정해진다.



####데이터 영역

- 모든 전역변수와 static 변수 영역

- 프로그램이 로딩될 때(main 함수 호출 전) 메모리가 할당된다. 

- 데이터 영역은 초기화 변수 영역과 초기화되지 않은 변수 영역으로 나뉜다.

  초기화되지 않은 변수들은 0으로 초기화 된다.

  -> 초기화 되지 않은 변수들은 하나의 명령으로 한꺼번에 0으로 만들 수 있기 때문.

- 데이터 영역의 크기는 **프로그램이 메모리에 올라갈 때** 정해진다.



####스택 영역 

- 활성 함수의 **활성 레코드**(스택 프레임)가 저장된다.

  활성 함수 : 현재 호출중인 함수

- 함수가 호출되면 활성 레코드가 생성되어 스택 영역의 제일 위에 들어간다.

- 함수가 종료되면 활성 레코드는 스택 영역에서 사라진다.

- 활성 함수의 수가 계속 변하므로, **스택 영역의 크기는 계속 변경**된다.

- 함수의 지역 변수는 스택 영역의 활성 레코드 내 메모리에 저장된다.

  지역 변수는 초기화되지 않을 경우, 쓰레기 값이 할당된다.

  

#### 힙 영역

- 동적 메모리(런타임 메모리) 영역

- 이름을 붙일 수 없다. 포인터로만 접근 가능하다.

  메모리의 주소값을 잃어버리는 것을 **메모리 누수**라고 하는데, 메모리 누수는 큰 오류의 원인 중 하나이다.

- **힙 영역과 스택 영역은 같은 공간을 공유한다.**





### 2. 로딩 과정

컴파일 -> 링킹 -> 로딩 중, 로딩 과정



#### (1) 코드를 코드 영역으로 보내기

기계어를 코드 영역으로 보내자.

#### (2) 데이터 영역의 전역 변수 및 static 변수 메모리 할당

초기화 되는 변수 영역 / 초기화 되지 않은 변수 영역

#### (3) 전역 변수 및 static 변수 초기화

초기화 된 변수는 지정된 변수로  초기화를, 그렇지 않은 변수는 0으로 초기화.



로딩이 완료되면 **main 함수가 호출**되어 프로그램이 실질적으로 시작된다.





###3. 함수 호출

함수 호출은 실행 시간과 메모리를 많이 잡아먹는 작업이다.

그래서 C언어같은 경우에는 매크로를 사용한다.(ㅠ)



